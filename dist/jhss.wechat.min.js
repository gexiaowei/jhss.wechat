/**
 * jquery.jhss.wechat.js
 * @author gexiaowei <gandxiaowei@gmail.com>
 * @version 1.0.0
 * copyright 2014-2015, gandxiaowei@gmail.com. all rights reserved.
 */

function Auth(){this.authURL="http://asteroid.youguu.com/asteroid/wx/signature",this.appId="wx7f5b58f40c143dcc",this.apiList=["onMenuShareTimeline","onMenuShareAppMessage"]}function Wechat(){this["default"]={share:{title:document.title,link:window.location.href,imgUrl:"http://img.itc.cn/photo/jbkRk8qUehb",desc:document.getElementsByName("description").length?document.getElementsByName("description")[0].content:""}}}Auth.prototype.done=function(a){var b=this,c=new XMLHttpRequest;c.open("get",this.authURL+"?url="+encodeURIComponent(window.location.href.replace(window.location.hash,"")),!0),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var d=JSON.parse(c.responseText);d&&"0000"==d.status&&a&&a({appId:b.appId,timestamp:d.timestamp,nonceStr:d.noncestr,signature:d.signature,jsApiList:b.apiList})}},c.send()},function(a,b){var c,d="//res.wx.qq.com/open/js/jweixin-1.0.0.js",e=b.getElementsByTagName("script"),f=!1;for(c in e){var g=c.getAttribute("src");if(g&&g.indexOf(d)>=0){f=!0;break}}if(a.wechat=new Wechat,!f){var h=b.getElementsByTagName("head")[0];c=b.createElement("script"),c.onload=function(){a.wechat.register()},c.type="text/javascript",c.src=d,h.appendChild(c)}}(window,document),Object.prototype.extendObject=function(a){a=a||{};for(var b in a)a[b]&&(this[b]=a[b]);return this},Wechat.prototype.register=function(){var a=new Auth,b=this;a.done(function(a){wx.config(a)}),wx.ready(function(){b._setAppMessage(),b._setTimeline()})},Wechat.prototype._setAppMessage=function(a){return a=a||{},a.extendObject(this["default"].share),wx.onMenuShareAppMessage(a),this},Wechat.prototype._setTimeline=function(a){return a=a||{},a.extendObject(this["default"].share),wx.onMenuShareTimeline(a),this},Wechat.prototype.setShareMessage=function(a){this["default"].share.extendObject(a),this._setAppMessage({title:a.appTitle||a.title,link:a.link,imgUrl:a.imgUrl,desc:a.desc}),this._setTimeline({title:a.timelineTitle||a.title,link:a.link,imgUrl:a.imgUrl})};
//# sourceMappingURL=jhss.wechat.min.js.map